<!DOCType html>
<html>
    <head>
		<script>
			/*
			Await:
			The keyword await makes JavaScript wait until that promise 
			settles and returns its result.

			keyword await that works ONLY inside async functions

			In the below example:
			The function execution “pauses” at the line (*) and resumes 
			when the promise settles, with result becoming its result. 
			So the code above shows “done!” in one second.
			*/

			//Without await
			async function _f() 
			{
						let testPromise = new Promise((resolve, reject) => {
							setTimeout(() => resolve("done!"), 3000)
						});
						/////
						testPromise.then((result)=>{
							console.log("In Async. function, result of promise:" +result); // "done!"
							return result;
						});

						//let result = await testPromise;
						//return result;
			}

			//With await
			async function f() 
			{
						let testPromise = new Promise((resolve, reject) => {
							setTimeout(() => resolve("done!"), 3000)
						});
						//wait till the promise resolves (*)
						//Execure promise, and return its returned resolve value in the assigned variable
						let result = await testPromise; //works ONLY inside async functions
						console.log("In Async. function, result of promise:" +result); // "done!"
						return result;
						//The prev. 2 lines (await) can be replaced by the following code:
						/*promise.then((res)=>{
							console.log("In Async. function, result of promise:" +res);	
						});*/
			}
			console.log("Testing await...");
			console.log("Before calling function...");
			//f();
			//console.log("After calling function...");

			var x = f().then(()=>{
				console.log("After calling function...");
			});
			
			//More: 
				//https://javascript.info/async-await
				//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await
		</script>
    <head>
    <body>
			Async, await

    </body>

</html>